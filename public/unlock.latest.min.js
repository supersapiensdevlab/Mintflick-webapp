/* eslint-disable no-undef */
/*! For license information please see unlock.latest.min.js.LICENSE.txt */
!(function (e, t) {
  'object' == typeof exports && 'object' == typeof module
    ? (module.exports = t())
    : 'function' == typeof define && define.amd
    ? define('@unlock-protocol/paywall', [], t)
    : 'object' == typeof exports
    ? (exports['@unlock-protocol/paywall'] = t())
    : (e['@unlock-protocol/paywall'] = t());
})(this, function () {
  return (() => {
    'use strict';
    var e = {
        160: (e, t, o) => {
          o.d(t, { Z: () => i });
          var n = o(272),
            r = o.n(n),
            a = o(609),
            s = o.n(a)()(r());
          s.push([
            e.id,
            '.unlock-protocol-checkout {\n  display: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100vh;\n  border: 0;\n  z-index: -2147483647;\n}\n\n.unlock-protocol-checkout.show {\n  display: block;\n  z-index: 2147483647;\n}\n',
            '',
            {
              version: 3,
              sources: ['webpack://./src/iframe.css'],
              names: [],
              mappings:
                'AAAA;EACE,aAAa;EACb,eAAe;EACf,MAAM;EACN,OAAO;EACP,WAAW;EACX,aAAa;EACb,SAAS;EACT,oBAAoB;AACtB;;AAEA;EACE,cAAc;EACd,mBAAmB;AACrB',
              sourcesContent: [
                '.unlock-protocol-checkout {\n  display: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100vh;\n  border: 0;\n  z-index: -2147483647;\n}\n\n.unlock-protocol-checkout.show {\n  display: block;\n  z-index: 2147483647;\n}\n',
              ],
              sourceRoot: '',
            },
          ]);
          const i = s;
        },
        609: (e) => {
          e.exports = function (e) {
            var t = [];
            return (
              (t.toString = function () {
                return this.map(function (t) {
                  var o = '',
                    n = void 0 !== t[5];
                  return (
                    t[4] && (o += '@supports ('.concat(t[4], ') {')),
                    t[2] && (o += '@media '.concat(t[2], ' {')),
                    n && (o += '@layer'.concat(t[5].length > 0 ? ' '.concat(t[5]) : '', ' {')),
                    (o += e(t)),
                    n && (o += '}'),
                    t[2] && (o += '}'),
                    t[4] && (o += '}'),
                    o
                  );
                }).join('');
              }),
              (t.i = function (e, o, n, r, a) {
                'string' == typeof e && (e = [[null, e, void 0]]);
                var s = {};
                if (n)
                  for (var i = 0; i < this.length; i++) {
                    var c = this[i][0];
                    null != c && (s[c] = !0);
                  }
                for (var l = 0; l < e.length; l++) {
                  var d = [].concat(e[l]);
                  (n && s[d[0]]) ||
                    (void 0 !== a &&
                      (void 0 === d[5] ||
                        (d[1] = '@layer'
                          .concat(d[5].length > 0 ? ' '.concat(d[5]) : '', ' {')
                          .concat(d[1], '}')),
                      (d[5] = a)),
                    o &&
                      (d[2]
                        ? ((d[1] = '@media '.concat(d[2], ' {').concat(d[1], '}')), (d[2] = o))
                        : (d[2] = o)),
                    r &&
                      (d[4]
                        ? ((d[1] = '@supports ('.concat(d[4], ') {').concat(d[1], '}')), (d[4] = r))
                        : (d[4] = ''.concat(r))),
                    t.push(d));
                }
              }),
              t
            );
          };
        },
        272: (e) => {
          e.exports = function (e) {
            var t = e[1],
              o = e[3];
            if (!o) return t;
            if ('function' == typeof btoa) {
              var n = btoa(unescape(encodeURIComponent(JSON.stringify(o)))),
                r = 'sourceMappingURL=data:application/json;charset=utf-8;base64,'.concat(n),
                a = '/*# '.concat(r, ' */'),
                s = o.sources.map(function (e) {
                  return '/*# sourceURL='.concat(o.sourceRoot || '').concat(e, ' */');
                });
              return [t].concat(s).concat([a]).join('\n');
            }
            return [t].join('\n');
          };
        },
        655: (e, t, o) => {
          o.r(t), o.d(t, { default: () => d });
          var n = 'application/x-postmate-v1+json',
            r = 0,
            a = { handshake: 1, 'handshake-reply': 1, call: 1, emit: 1, reply: 1, request: 1 },
            s = function (e, t) {
              return !(
                ('string' == typeof t && e.origin !== t) ||
                !e.data ||
                ('object' == typeof e.data && !('postmate' in e.data)) ||
                e.data.type !== n ||
                !a[e.data.postmate]
              );
            },
            i = (function () {
              function e(e) {
                var t = this;
                (this.parent = e.parent),
                  (this.frame = e.frame),
                  (this.child = e.child),
                  (this.childOrigin = e.childOrigin),
                  (this.events = {}),
                  (this.listener = function (e) {
                    if (!s(e, t.childOrigin)) return !1;
                    var o = ((e || {}).data || {}).value || {},
                      n = o.data,
                      r = o.name;
                    'emit' === e.data.postmate && r in t.events && t.events[r].call(t, n);
                  }),
                  this.parent.addEventListener('message', this.listener, !1);
              }
              var t = e.prototype;
              return (
                (t.get = function (e) {
                  var t = this;
                  return new l.Promise(function (o) {
                    var a = ++r;
                    t.parent.addEventListener(
                      'message',
                      function e(n) {
                        n.data.uid === a &&
                          'reply' === n.data.postmate &&
                          (t.parent.removeEventListener('message', e, !1), o(n.data.value));
                      },
                      !1,
                    ),
                      t.child.postMessage(
                        { postmate: 'request', type: n, property: e, uid: a },
                        t.childOrigin,
                      );
                  });
                }),
                (t.call = function (e, t) {
                  this.child.postMessage(
                    { postmate: 'call', type: n, property: e, data: t },
                    this.childOrigin,
                  );
                }),
                (t.on = function (e, t) {
                  this.events[e] = t;
                }),
                (t.destroy = function () {
                  window.removeEventListener('message', this.listener, !1),
                    this.frame.parentNode.removeChild(this.frame);
                }),
                e
              );
            })(),
            c = (function () {
              function e(e) {
                var t = this;
                (this.model = e.model),
                  (this.parent = e.parent),
                  (this.parentOrigin = e.parentOrigin),
                  (this.child = e.child),
                  this.child.addEventListener('message', function (e) {
                    if (s(e, t.parentOrigin)) {
                      var o = e.data,
                        r = o.property,
                        a = o.uid,
                        i = o.data;
                      'call' !== e.data.postmate
                        ? (function (e, t) {
                            var o = 'function' == typeof e[t] ? e[t]() : e[t];
                            return l.Promise.resolve(o);
                          })(t.model, r).then(function (t) {
                            return e.source.postMessage(
                              { property: r, postmate: 'reply', type: n, uid: a, value: t },
                              e.origin,
                            );
                          })
                        : r in t.model && 'function' == typeof t.model[r] && t.model[r](i);
                    }
                  });
              }
              return (
                (e.prototype.emit = function (e, t) {
                  this.parent.postMessage(
                    { postmate: 'emit', type: n, value: { name: e, data: t } },
                    this.parentOrigin,
                  );
                }),
                e
              );
            })(),
            l = (function () {
              function e(e) {
                var t = e.container,
                  o = void 0 === t ? (void 0 !== o ? o : document.body) : t,
                  n = e.model,
                  r = e.url,
                  a = e.name,
                  s = e.classListArray,
                  i = void 0 === s ? [] : s;
                return (
                  (this.parent = window),
                  (this.frame = document.createElement('iframe')),
                  (this.frame.name = a || ''),
                  this.frame.classList.add.apply(this.frame.classList, i),
                  o.appendChild(this.frame),
                  (this.child =
                    this.frame.contentWindow || this.frame.contentDocument.parentWindow),
                  (this.model = n || {}),
                  this.sendHandshake(r)
                );
              }
              return (
                (e.prototype.sendHandshake = function (t) {
                  var o,
                    r = this,
                    a = (function (e) {
                      var t = document.createElement('a');
                      t.href = e;
                      var o = t.protocol.length > 4 ? t.protocol : window.location.protocol,
                        n = t.host.length
                          ? '80' === t.port || '443' === t.port
                            ? t.hostname
                            : t.host
                          : window.location.host;
                      return t.origin || o + '//' + n;
                    })(t),
                    c = 0;
                  return new e.Promise(function (e, l) {
                    r.parent.addEventListener(
                      'message',
                      function t(n) {
                        return (
                          !!s(n, a) &&
                          ('handshake-reply' === n.data.postmate
                            ? (clearInterval(o),
                              r.parent.removeEventListener('message', t, !1),
                              (r.childOrigin = n.origin),
                              e(new i(r)))
                            : l('Failed handshake'))
                        );
                      },
                      !1,
                    );
                    var d = function () {
                        c++,
                          r.child.postMessage(
                            { postmate: 'handshake', type: n, model: r.model },
                            a,
                          ),
                          5 === c && clearInterval(o);
                      },
                      u = function () {
                        d(), (o = setInterval(d, 500));
                      };
                    r.frame.attachEvent ? r.frame.attachEvent('onload', u) : (r.frame.onload = u),
                      (r.frame.src = t);
                  });
                }),
                e
              );
            })();
          (l.debug = !1),
            (l.Promise = (function () {
              try {
                return window ? window.Promise : Promise;
              } catch (e) {
                return null;
              }
            })()),
            (l.Model = (function () {
              function e(e) {
                return (
                  (this.child = window),
                  (this.model = e),
                  (this.parent = this.child.parent),
                  this.sendHandshakeReply()
                );
              }
              return (
                (e.prototype.sendHandshakeReply = function () {
                  var e = this;
                  return new l.Promise(function (t, o) {
                    e.child.addEventListener(
                      'message',
                      function r(a) {
                        if (a.data.postmate) {
                          if ('handshake' === a.data.postmate) {
                            e.child.removeEventListener('message', r, !1),
                              a.source.postMessage(
                                { postmate: 'handshake-reply', type: n },
                                a.origin,
                              ),
                              (e.parentOrigin = a.origin);
                            var s = a.data.model;
                            return (
                              s &&
                                Object.keys(s).forEach(function (t) {
                                  e.model[t] = s[t];
                                }),
                              t(new c(e))
                            );
                          }
                          return o('Handshake Reply Failed');
                        }
                      },
                      !1,
                    );
                  });
                }),
                e
              );
            })());
          const d = l;
        },
        170: (e, t, o) => {
          o.r(t), o.d(t, { default: () => k });
          var n = o(62),
            r = o.n(n),
            a = o(36),
            s = o.n(a),
            i = o(793),
            c = o.n(i),
            l = o(892),
            d = o.n(l),
            u = o(173),
            h = o.n(u),
            p = o(464),
            f = o.n(p),
            m = o(160),
            v = {};
          (v.styleTagTransform = f()),
            (v.setAttributes = d()),
            (v.insert = c().bind(null, 'head')),
            (v.domAPI = s()),
            (v.insertStyleElement = h()),
            r()(m.Z, v);
          const k = m.Z && m.Z.locals ? m.Z.locals : void 0;
        },
        62: (e) => {
          var t = [];
          function o(e) {
            for (var o = -1, n = 0; n < t.length; n++)
              if (t[n].identifier === e) {
                o = n;
                break;
              }
            return o;
          }
          function n(e, n) {
            for (var a = {}, s = [], i = 0; i < e.length; i++) {
              var c = e[i],
                l = n.base ? c[0] + n.base : c[0],
                d = a[l] || 0,
                u = ''.concat(l, ' ').concat(d);
              a[l] = d + 1;
              var h = o(u),
                p = { css: c[1], media: c[2], sourceMap: c[3], supports: c[4], layer: c[5] };
              if (-1 !== h) t[h].references++, t[h].updater(p);
              else {
                var f = r(p, n);
                (n.byIndex = i), t.splice(i, 0, { identifier: u, updater: f, references: 1 });
              }
              s.push(u);
            }
            return s;
          }
          function r(e, t) {
            var o = t.domAPI(t);
            return (
              o.update(e),
              function (t) {
                if (t) {
                  if (
                    t.css === e.css &&
                    t.media === e.media &&
                    t.sourceMap === e.sourceMap &&
                    t.supports === e.supports &&
                    t.layer === e.layer
                  )
                    return;
                  o.update((e = t));
                } else o.remove();
              }
            );
          }
          e.exports = function (e, r) {
            var a = n((e = e || []), (r = r || {}));
            return function (e) {
              e = e || [];
              for (var s = 0; s < a.length; s++) {
                var i = o(a[s]);
                t[i].references--;
              }
              for (var c = n(e, r), l = 0; l < a.length; l++) {
                var d = o(a[l]);
                0 === t[d].references && (t[d].updater(), t.splice(d, 1));
              }
              a = c;
            };
          };
        },
        793: (e) => {
          var t = {};
          e.exports = function (e, o) {
            var n = (function (e) {
              if (void 0 === t[e]) {
                var o = document.querySelector(e);
                if (window.HTMLIFrameElement && o instanceof window.HTMLIFrameElement)
                  try {
                    o = o.contentDocument.head;
                  } catch (e) {
                    o = null;
                  }
                t[e] = o;
              }
              return t[e];
            })(e);
            if (!n)
              throw new Error(
                "Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.",
              );
            n.appendChild(o);
          };
        },
        173: (e) => {
          e.exports = function (e) {
            var t = document.createElement('style');
            return e.setAttributes(t, e.attributes), e.insert(t, e.options), t;
          };
        },
        892: (e, t, o) => {
          e.exports = function (e) {
            var t = o.nc;
            t && e.setAttribute('nonce', t);
          };
        },
        36: (e) => {
          e.exports = function (e) {
            var t = e.insertStyleElement(e);
            return {
              update: function (o) {
                !(function (e, t, o) {
                  var n = '';
                  o.supports && (n += '@supports ('.concat(o.supports, ') {')),
                    o.media && (n += '@media '.concat(o.media, ' {'));
                  var r = void 0 !== o.layer;
                  r && (n += '@layer'.concat(o.layer.length > 0 ? ' '.concat(o.layer) : '', ' {')),
                    (n += o.css),
                    r && (n += '}'),
                    o.media && (n += '}'),
                    o.supports && (n += '}');
                  var a = o.sourceMap;
                  a &&
                    'undefined' != typeof btoa &&
                    (n += '\n/*# sourceMappingURL=data:application/json;base64,'.concat(
                      btoa(unescape(encodeURIComponent(JSON.stringify(a)))),
                      ' */',
                    )),
                    t.styleTagTransform(n, e, t.options);
                })(t, e, o);
              },
              remove: function () {
                !(function (e) {
                  if (null === e.parentNode) return !1;
                  e.parentNode.removeChild(e);
                })(t);
              },
            };
          };
        },
        464: (e) => {
          e.exports = function (e, t) {
            if (t.styleSheet) t.styleSheet.cssText = e;
            else {
              for (; t.firstChild; ) t.removeChild(t.firstChild);
              t.appendChild(document.createTextNode(e));
            }
          };
        },
        486: function (e, t, o) {
          var n =
            (this && this.__importDefault) ||
            function (e) {
              return e && e.__esModule ? e : { default: e };
            };
          Object.defineProperty(t, '__esModule', { value: !0 }),
            (t.Paywall = t.CheckoutEvents = t.checkoutIframeClassName = void 0);
          const r = n(o(655));
          o(170);
          const a = o(797),
            s = o(211),
            i = o(617),
            c = o(834),
            l = o(940),
            d = o(167);
          var u;
          (t.checkoutIframeClassName = 'unlock-protocol-checkout'),
            (function (e) {
              (e.userInfo = 'checkout.userInfo'),
                (e.closeModal = 'checkout.closeModal'),
                (e.transactionInfo = 'checkout.transactionInfo'),
                (e.methodCall = 'checkout.methodCall'),
                (e.onEvent = 'checkout.onEvent'),
                (e.enable = 'checkout.enable');
            })((u = t.CheckoutEvents || (t.CheckoutEvents = {}))),
            (t.Paywall = class {
              constructor(e, o, n) {
                (this.childCallBuffer = []),
                  (this.loadCheckoutModal = (e) => {
                    this.iframe ? this.showIframe() : this.shakeHands(),
                      this.sendOrBuffer('setConfig', e || this.paywallConfig);
                  }),
                  (this.getUserAccountAddress = () => this.userAccountAddress),
                  (this.resetConfig = (e) => {
                    (this.paywallConfig = (0, a.injectProviderInfo)(e, this.provider)),
                      this.checkKeysAndLock(),
                      this.sendOrBuffer('setConfig', e || this.paywallConfig);
                  }),
                  (this.getState = () => this.lockStatus),
                  (this.cacheUserInfo = async (e) => {
                    (0, s.store)('userInfo', e);
                  }),
                  (this.loadCache = async () => {
                    const e = (0, s.retrieve)('userInfo');
                    if (!e) return this.lockPage();
                    (this.userAccountAddress = e.address), this.checkKeysAndLock();
                  }),
                  (this.checkKeysAndLock = async () => {
                    if (!this.userAccountAddress) return;
                    this.lockStatus = void 0;
                    const e = await (0, i.isUnlocked)(
                      this.userAccountAddress,
                      this.paywallConfig,
                      this.networkConfigs,
                    );
                    return e.length ? this.unlockPage(e) : this.lockPage();
                  }),
                  (this.shakeHands = async () => {
                    const e = await new r.default({
                      url: `${d.unlockAppUrl}/checkout`,
                      classListArray: [t.checkoutIframeClassName, 'show'],
                    });
                    (this.child = e),
                      (this.iframe = document.getElementsByClassName(t.checkoutIframeClassName)[0]),
                      e.on(u.closeModal, this.hideIframe),
                      e.on(u.userInfo, this.handleUserInfoEvent),
                      e.on(u.methodCall, this.handleMethodCallEvent),
                      e.on(u.onEvent, this.handleOnEventEvent),
                      e.on(u.enable, this.handleEnable),
                      e.on(u.transactionInfo, this.handleTransactionInfoEvent),
                      this.childCallBuffer.forEach((t) => e.call(...t));
                  }),
                  (this.sendOrBuffer = (e, t) => {
                    this.child ? this.child.call(e, t) : this.childCallBuffer.push([e, t]);
                  }),
                  (this.handleTransactionInfoEvent = async ({ hash: e, lock: t }) => {
                    var o;
                    const n =
                        (null === (o = this.paywallConfig.locks[t]) || void 0 === o
                          ? void 0
                          : o.network) || this.paywallConfig.network,
                      { provider: r } = this.networkConfigs[n.toString()] || this.networkConfigs[n];
                    (0, a.dispatchEvent)(a.unlockEvents.transactionSent, { hash: e, lock: t }),
                      this.paywallConfig.pessimistic ||
                        ((await (0, c.willUnlock)(r, this.userAccountAddress, t, e, !0)) &&
                          this.unlockPage([t]));
                  }),
                  (this.handleUserInfoEvent = async (e) => {
                    (this.userAccountAddress = e.address),
                      (0, a.dispatchEvent)(a.unlockEvents.authenticated, e),
                      this.cacheUserInfo(e),
                      this.checkKeysAndLock();
                  }),
                  (this.handleMethodCallEvent = async ({ method: e, params: t, id: o }) => {
                    this.provider.sendAsync({ method: e, params: t, id: o }, (e, t) => {
                      this.child.call('resolveMethodCall', { id: o, error: e, response: t });
                    });
                  }),
                  (this.handleOnEventEvent = async (e) => {
                    this.provider.on(e, () => {
                      this.child.call('resolveOnEvent', e);
                    });
                  }),
                  (this.handleEnable = async () => {
                    await (0, l.enableInjectedProvider)(this.provider),
                      this.child.call('resolveOnEnable');
                  }),
                  (this.showIframe = () => {
                    this.iframe.classList.add('show');
                  }),
                  (this.hideIframe = () => {
                    (0, a.dispatchEvent)(a.unlockEvents.closeModal, {}),
                      this.iframe.classList.remove('show');
                  }),
                  (this.lockPage = () => {
                    (this.lockStatus = 'locked'),
                      (0, a.dispatchEvent)(a.unlockEvents.status, { state: this.lockStatus });
                  }),
                  (this.unlockPage = (e = []) => {
                    (this.lockStatus = 'unlocked'),
                      (0, a.dispatchEvent)(a.unlockEvents.status, {
                        locks: e,
                        state: this.lockStatus,
                      });
                  }),
                  (this.networkConfigs = o),
                  (this.provider = n || (0, l.getProvider)(window)),
                  this.resetConfig(e),
                  this.loadCache();
              }
            });
        },
        279: function (e, t, o) {
          var n =
            (this && this.__importDefault) ||
            function (e) {
              return e && e.__esModule ? e : { default: e };
            };
          Object.defineProperty(t, '__esModule', { value: !0 }), (t.networkConfigs = void 0);
          const r = n(o(408));
          (t.networkConfigs = {}),
            Object.keys(r.default)
              .map(Number)
              .forEach((e) => {
                const { provider: o } = r.default[e];
                t.networkConfigs[e] = { provider: o };
              });
        },
        167: (e, t) => {
          var o;
          let n, r;
          Object.defineProperty(t, '__esModule', { value: !0 }),
            (t.locksmithUri = t.unlockAppUrl = void 0);
          const a =
            (null ===
              (o = null === document || void 0 === document ? void 0 : document.currentScript) ||
            void 0 === o
              ? void 0
              : o.getAttribute('src')) || 'paywall.unlock-protocol.com';
          a.match('staging-paywall.unlock-protocol.com')
            ? ((n = 'https://staging-app.unlock-protocol.com'),
              (r = 'https://staging-locksmith.unlock-protocol.com'))
            : a.match('paywall.unlock-protocol.com')
            ? ((n = 'https://app.unlock-protocol.com'),
              (r = 'https://locksmith.unlock-protocol.com'))
            : ((n = 'http://0.0.0.0:3000'), (r = 'http://0.0.0.0:8080')),
            (t.unlockAppUrl = n),
            (t.locksmithUri = r);
        },
        940: (e, t) => {
          Object.defineProperty(t, '__esModule', { value: !0 }),
            (t.enableInjectedProvider = t.getProvider = void 0),
            (t.getProvider = (e) =>
              e.ethereum ? e.ethereum : e.web3 ? e.web3.currentProvider : void 0),
            (t.enableInjectedProvider = async (e) => {
              if (!e) throw new Error('Fatal: no web3 provider found.');
              await e.enable();
            });
        },
        686: (e, t) => {
          Object.defineProperty(t, '__esModule', { value: !0 }),
            (t.getTransaction = void 0),
            (t.getTransaction = async (e, t) => {
              const o = {
                  method: 'eth_getTransactionByHash',
                  params: [t],
                  id: 31337,
                  jsonrpc: '2.0',
                },
                n = await fetch(e, {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify(o),
                });
              return (await n.json()).result;
            }),
            (t.default = t.getTransaction);
        },
        797: (e, t) => {
          Object.defineProperty(t, '__esModule', { value: !0 }),
            (t.injectProviderInfo =
              t.setupUnlockProtocolVariable =
              t.unlockEvents =
              t.dispatchEvent =
                void 0),
            (t.dispatchEvent = (e, o) => {
              let n;
              e === t.unlockEvents.status && (0, t.dispatchEvent)('unlockProtocol', o.state);
              try {
                n = new window.CustomEvent(e, { detail: o });
              } catch (t) {
                (n = window.document.createEvent('customevent')), n.initCustomEvent(e, !0, !0, o);
              }
              window.dispatchEvent(n);
            }),
            (t.unlockEvents = {
              status: 'unlockProtocol.status',
              authenticated: 'unlockProtocol.authenticated',
              transactionSent: 'unlockProtocol.transactionSent',
              closeModal: 'unlockProtocol.closeModal',
            }),
            (t.setupUnlockProtocolVariable = (e) => {
              const t = {},
                o = { writable: !1, configurable: !1, enumerable: !1 },
                n = Object.keys(e).map((t) => ({ [t]: Object.assign({ value: e[t] }, o) }));
              Object.defineProperties(t, Object.assign({}, ...n)), (Object.freeze || Object)(t);
              try {
                Object.defineProperties(window, { unlockProtocol: Object.assign({ value: t }, o) });
              } catch (e) {
                console.warn('WARNING: unlockProtocol already defined, cannot re-define it');
              }
            }),
            (t.injectProviderInfo = (e, t) => {
              const o = Object.assign({}, e);
              return o.useDelegatedProvider || (o.useDelegatedProvider = !!t), o;
            });
        },
        617: (e, t, o) => {
          Object.defineProperty(t, '__esModule', { value: !0 }), (t.isUnlocked = void 0);
          const n = o(385),
            r = o(834),
            a = o(167);
          (t.isUnlocked = async (e, t, o) => {
            const s = [];
            return (
              await Promise.all(
                Object.entries(t.locks).map(async ([i]) => {
                  const c = t.locks[i].network || t.network,
                    { provider: l } = o[c];
                  (await (0, n.keyExpirationTimestampFor)(l, i, e)) > new Date().getTime() / 1e3
                    ? s.push(i)
                    : t.pessimistic ||
                      ((await (0, r.optimisticUnlocking)(l, a.locksmithUri, [i], e)) && s.push(i));
                }),
              ),
              s
            );
          }),
            (t.default = { isUnlocked: t.isUnlocked });
        },
        385: (e, t) => {
          Object.defineProperty(t, '__esModule', { value: !0 }),
            (t.keyExpirationTimestampFor = void 0),
            (t.keyExpirationTimestampFor = async (e, t, o) => {
              const n = {
                method: 'eth_call',
                params: [
                  { to: t, data: `0xabdf82ce000000000000000000000000${o.substring(2)}` },
                  'latest',
                ],
                id: 31337,
                jsonrpc: '2.0',
              };
              try {
                const t = await fetch(e, {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify(n),
                });
                if (!t) return 0;
                const { result: o } = await t.json();
                return parseInt(o, 16) > Number.MAX_SAFE_INTEGER ? 0 : parseInt(o, 16) || 0;
              } catch (e) {
                return console.error(`Error fetching timestamp for ${o} on ${t}: ${e}`), 0;
              }
            }),
            (t.default = t.keyExpirationTimestampFor);
        },
        211: (e, t) => {
          function o() {
            const e = localStorage;
            try {
              const t = '__storage_test__';
              return e.setItem(t, t), e.removeItem(t), !0;
            } catch (t) {
              return (
                t instanceof DOMException &&
                (22 === t.code ||
                  1014 === t.code ||
                  'QuotaExceededError' === t.name ||
                  'NS_ERROR_DOM_QUOTA_REACHED' === t.name) &&
                0 !== e.length
              );
            }
          }
          Object.defineProperty(t, '__esModule', { value: !0 }),
            (t.retrieve = t.store = void 0),
            (t.default = o),
            (t.store = function (e, t) {
              o() && localStorage.setItem(e, JSON.stringify(t));
            }),
            (t.retrieve = function (e) {
              if (o()) {
                const t = localStorage.getItem(e) || !1;
                return t ? JSON.parse(t) : void 0;
              }
            });
        },
        834: (e, t, o) => {
          Object.defineProperty(t, '__esModule', { value: !0 }),
            (t.withinLast24Hours =
              t.getTransactionsForUserAndLocks =
              t.willUnlock =
              t.optimisticLocks =
              t.optimisticUnlocking =
                void 0);
          const n = o(686),
            r = o(385);
          (t.optimisticUnlocking = async (e, o, n, r) => {
            const a = (await (0, t.getTransactionsForUserAndLocks)(o, r, n)).filter((e) =>
              (0, t.withinLast24Hours)(e.createdAt),
            );
            return (
              await Promise.all(
                a.map((o) => (0, t.willUnlock)(e, r, o.recipient, o.transactionHash, !1)),
              )
            ).reduce((e, t) => t || !!e, !1);
          }),
            (t.optimisticLocks = async (e, o, n, r) => {
              const a = (await (0, t.getTransactionsForUserAndLocks)(o, r, n)).filter((e) =>
                  (0, t.withinLast24Hours)(e.createdAt),
                ),
                s = [];
              return (
                a.map(async (o) => {
                  (await (0, t.willUnlock)(e, r, o.recipient, o.transactionHash, !1)) &&
                    s.push(o.recipient);
                }),
                s
              );
            }),
            (t.willUnlock = async (e, t, o, a, s) => {
              if (t && o && a) {
                const i = await (0, n.getTransaction)(e, a);
                return i
                  ? !i.blockNumber ||
                      (await (0, r.keyExpirationTimestampFor)(e, o, t)) > new Date().getTime() / 1e3
                  : !!s;
              }
              return !1;
            }),
            (t.getTransactionsForUserAndLocks = async (e, t, o) => {
              const n = `${e}/transactions?for=${t}&${o
                .map((e) => `recipient[]=${encodeURIComponent(e)}`)
                .join('&')}`;
              try {
                const e = await fetch(n);
                return (await e.json()).transactions;
              } catch (e) {
                return console.error(`Could not retrieve transactions for ${t} on ${o}: ${e}`), [];
              }
            }),
            (t.withinLast24Hours = (e) => {
              const t = Date.now() - 864e5;
              return new Date(e).getTime() > t;
            }),
            (t.default = t.optimisticUnlocking);
        },
        408: function (e, t, o) {
          var n =
              (this && this.__createBinding) ||
              (Object.create
                ? function (e, t, o, n) {
                    void 0 === n && (n = o),
                      Object.defineProperty(e, n, {
                        enumerable: !0,
                        get: function () {
                          return t[o];
                        },
                      });
                  }
                : function (e, t, o, n) {
                    void 0 === n && (n = o), (e[n] = t[o]);
                  }),
            r =
              (this && this.__setModuleDefault) ||
              (Object.create
                ? function (e, t) {
                    Object.defineProperty(e, 'default', { enumerable: !0, value: t });
                  }
                : function (e, t) {
                    e.default = t;
                  }),
            a =
              (this && this.__importStar) ||
              function (e) {
                if (e && e.__esModule) return e;
                var t = {};
                if (null != e)
                  for (var o in e)
                    'default' !== o && Object.prototype.hasOwnProperty.call(e, o) && n(t, e, o);
                return r(t, e), t;
              },
            s =
              (this && this.__exportStar) ||
              function (e, t) {
                for (var o in e)
                  'default' === o || Object.prototype.hasOwnProperty.call(t, o) || n(t, e, o);
              };
          Object.defineProperty(t, '__esModule', { value: !0 }), (t.networks = void 0);
          const i = a(o(129));
          s(o(129), t),
            (t.networks = {}),
            Object.keys(i).forEach((e) => {
              const o = i[e];
              t.networks[o.id] = o;
            }),
            (t.default = t.networks);
        },
        843: (e, t) => {
          Object.defineProperty(t, '__esModule', { value: !0 }),
            (t.bsc = void 0),
            (t.bsc = {
              provider: 'https://bsc-dataseed.binance.org/',
              unlockAddress: '0x99b1348a9129ac49c6de7F11245773dE2f51fB0c',
              id: 56,
              name: 'Binance Smart Chain',
              blockTime: 1e3,
              subgraphURI: 'https://api.thegraph.com/subgraphs/name/unlock-protocol/bsc',
              explorer: {
                name: 'BscScan',
                urls: {
                  address: (e) => `https://bscscan.com/address/${e}`,
                  transaction: (e) => `https://bscscan.com/tx/${e}`,
                },
              },
              requiredConfirmations: 12,
              erc20: null,
              baseCurrencySymbol: 'BNB',
              locksmithUri: 'https://locksmith.unlock-protocol.com',
              nativeCurrency: { name: 'BNB', symbol: 'BNB', decimals: 18 },
              startBlock: 12396e3,
            }),
            (t.default = t.bsc);
        },
        129: function (e, t, o) {
          var n =
              (this && this.__createBinding) ||
              (Object.create
                ? function (e, t, o, n) {
                    void 0 === n && (n = o),
                      Object.defineProperty(e, n, {
                        enumerable: !0,
                        get: function () {
                          return t[o];
                        },
                      });
                  }
                : function (e, t, o, n) {
                    void 0 === n && (n = o), (e[n] = t[o]);
                  }),
            r =
              (this && this.__exportStar) ||
              function (e, t) {
                for (var o in e)
                  'default' === o || Object.prototype.hasOwnProperty.call(t, o) || n(t, e, o);
              };
          Object.defineProperty(t, '__esModule', { value: !0 }),
            r(o(96), t),
            r(o(43), t),
            r(o(854), t),
            r(o(761), t),
            r(o(347), t),
            r(o(843), t);
        },
        96: (e, t) => {
          Object.defineProperty(t, '__esModule', { value: !0 }),
            (t.localhost = void 0),
            (t.localhost = {
              id: 31337,
              name: 'localhost',
              provider: 'http://127.0.0.1:8545',
              locksmithUri: 'http://127.0.0.1:8080',
              unlockAppUrl: 'http://0.0.0.0:3000',
              subgraphURI: 'http://localhost:8000/subgraphs/name/unlock-protocol/unlock',
            });
        },
        43: (e, t) => {
          Object.defineProperty(t, '__esModule', { value: !0 }),
            (t.mainnet = void 0),
            (t.mainnet = {
              id: 1,
              provider: 'https://eth-mainnet.alchemyapi.io/v2/6idtzGwDtRbzil3s6QbYHr2Q_WBfn100',
              unlockAddress: '0x3d5409CcE1d45233dE1D4eBDEe74b8E004abDD13',
              name: 'Ethereum',
              blockTime: 8e3,
              subgraphURI: 'https://api.thegraph.com/subgraphs/name/unlock-protocol/unlock',
              explorer: {
                name: 'Etherscan',
                urls: {
                  address: (e) => `https://etherscan.io/address/${e}`,
                  transaction: (e) => `https://etherscan.io/tx/${e}`,
                },
              },
              erc20: { symbol: 'DAI', address: '0x6b175474e89094c44da98b954eedeac495271d0f' },
              requiredConfirmations: 12,
              baseCurrencySymbol: 'Eth',
              locksmithUri: 'https://locksmith.unlock-protocol.com',
              nativeCurrency: { name: 'Ether', symbol: 'Eth', decimals: 18 },
              startBlock: 7120795,
            }),
            (t.default = t.mainnet);
        },
        347: (e, t) => {
          Object.defineProperty(t, '__esModule', { value: !0 }),
            (t.polygon = void 0),
            (t.polygon = {
              provider:
                'https://snowy-weathered-waterfall.matic.quiknode.pro/5b11a0413a62a295070c0dfb25637d5f8c591aba/',
              unlockAddress: '0x14bb3586Ce2946E71B95Fe00Fc73dd30ed830863',
              id: 137,
              name: 'Polygon',
              blockTime: 1e3,
              subgraphURI: 'https://api.thegraph.com/subgraphs/name/unlock-protocol/polygon',
              explorer: {
                name: 'Polygonscan',
                urls: {
                  address: (e) => `https://polygonscan.com/address/${e}`,
                  transaction: (e) => `https://polygonscan.com/tx/${e}`,
                },
              },
              requiredConfirmations: 12,
              erc20: null,
              baseCurrencySymbol: 'Matic',
              locksmithUri: 'https://locksmith.unlock-protocol.com',
              nativeCurrency: { name: 'Matic', symbol: 'MATIC', decimals: 18 },
              startBlock: 15714206,
            }),
            (t.default = t.polygon);
        },
        854: (e, t) => {
          Object.defineProperty(t, '__esModule', { value: !0 }),
            (t.rinkeby = void 0),
            (t.rinkeby = {
              provider: 'https://eth-rinkeby.alchemyapi.io/v2/n0NXRSZ9olpkJUPDLBC00Es75jaqysyT',
              unlockAddress: '0xd8c88be5e8eb88e38e6ff5ce186d764676012b0b',
              id: 4,
              name: 'Rinkeby',
              blockTime: 8e3,
              subgraphURI: 'https://api.thegraph.com/subgraphs/name/unlock-protocol/unlock-rinkeby',
              explorer: {
                name: 'Etherscan',
                urls: {
                  address: (e) => `https://rinkeby.etherscan.io/address/${e}`,
                  transaction: (e) => `https://rinkeby.etherscan.io/tx/${e}`,
                },
              },
              requiredConfirmations: 12,
              erc20: { symbol: 'WEE', address: '0xaFF4481D10270F50f203E0763e2597776068CBc5' },
              baseCurrencySymbol: 'Eth',
              locksmithUri: 'https://rinkeby.locksmith.unlock-protocol.com',
              nativeCurrency: { name: 'Rinkeby Eth', symbol: 'Eth', decimals: 18 },
              startBlock: 3530008,
            }),
            (t.default = t.rinkeby);
        },
        761: (e, t) => {
          Object.defineProperty(t, '__esModule', { value: !0 }),
            (t.xdai = void 0),
            (t.xdai = {
              provider:
                'https://cool-empty-bird.xdai.quiknode.pro/4edba942fb43c718f24480484684e907fe3fe1d3/',
              unlockAddress: '0x14bb3586Ce2946E71B95Fe00Fc73dd30ed830863',
              id: 100,
              name: 'xDai',
              blockTime: 5e3,
              requiredConfirmations: 12,
              subgraphURI: 'https://api.thegraph.com/subgraphs/name/unlock-protocol/xdai',
              explorer: {
                name: 'Blockscout',
                urls: {
                  address: (e) => `https://blockscout.com/poa/xdai/address/${e}/transactions`,
                  transaction: (e) => `https://blockscout.com/poa/xdai/tx/${e}`,
                },
              },
              erc20: null,
              locksmithUri: 'https://locksmith.unlock-protocol.com',
              baseCurrencySymbol: 'xDai',
              nativeCurrency: { name: 'xDAI', symbol: 'xDai', decimals: 18 },
              startBlock: 14521200,
            }),
            (t.default = t.xdai);
        },
      },
      t = {};
    function o(n) {
      var r = t[n];
      if (void 0 !== r) return r.exports;
      var a = (t[n] = { id: n, exports: {} });
      return e[n].call(a.exports, a, a.exports, o), a.exports;
    }
    (o.n = (e) => {
      var t = e && e.__esModule ? () => e.default : () => e;
      return o.d(t, { a: t }), t;
    }),
      (o.d = (e, t) => {
        for (var n in t)
          o.o(t, n) && !o.o(e, n) && Object.defineProperty(e, n, { enumerable: !0, get: t[n] });
      }),
      (o.o = (e, t) => Object.prototype.hasOwnProperty.call(e, t)),
      (o.r = (e) => {
        'undefined' != typeof Symbol &&
          Symbol.toStringTag &&
          Object.defineProperty(e, Symbol.toStringTag, { value: 'Module' }),
          Object.defineProperty(e, '__esModule', { value: !0 });
      });
    var n = {};
    return (
      (() => {
        var e = n;
        Object.defineProperty(e, '__esModule', { value: !0 });
        const t = o(486),
          r = o(797),
          a = o(279),
          s = window.unlockProtocolConfig;
        if (s) {
          s.network
            ? (s.network = parseInt(s.network, 10))
            : ((s.network = 1),
              console.info(
                'For backward compatibility setting default network to 1. See https://docs.unlock-protocol.com/',
              ));
          const e = new t.Paywall(s, a.networkConfigs),
            { getState: o, getUserAccountAddress: n, loadCheckoutModal: i, resetConfig: c } = e;
          (0, r.setupUnlockProtocolVariable)({
            loadCheckoutModal: i,
            resetConfig: c,
            getUserAccountAddress: n,
            getState: o,
          });
        } else
          console.error(
            'Missing window.unlockProtocolConfig. See docs on how to configure your locks: https://docs.unlock-protocol.com/',
          );
      })(),
      n
    );
  })();
});
//# sourceMappingURL=unlock.latest.min.js.map
